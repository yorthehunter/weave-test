// Badge
//
// Used to indicate that something has changed “behind the scenes” and that a
// user should address the issue in order to dismiss the badge

$badge-bg--default: color(watermelon);
$badge-size: 1rem;

%weave-badge,
.weave-badge {
  @extend %type-xxs !optional;
  z-index: map-deep-get($elevation-map, 1, index); // Raises the badge 1 level
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: middle;
  text-align: center;
  border-radius: $rounded--circle;
  width: $badge-size;
  height: $badge-size;
  line-height: $badge-size;
  color: color(white);
  background-color: color(watermelon);
  transform: translate(-50%, -50%);

  &:empty {
    width: $badge-size/2;
    height: $badge-size/2;
  }

  &--inline {
    transform: translate(0, 0);
  }
}

%weave-badge--upper-right,
.weave-badge--upper-right {
  position: absolute;
  top: 0;
  right: 0;
  transform: translate(50%, -50%);
}

// .weave-has-badge allows a badge to be generated as a pseudo element outside
// of the DOM and can have dynamic content.
.weave-has-badge {
  position: relative;

  // Small badge, no content inside
  &:after {
    @extend %weave-badge, %weave-badge--upper-right !optional;
    content: '';
    width: $badge-size/2;
    height: $badge-size/2;
  }

  // Normal badge, with content
  &[data-badge] {
    &:after {
      content: attr(data-badge);
      width: $badge-size;
      height: $badge-size;
    }
  }

  // No badge (undefined)
  &[data-badge="none"],
  &[data-badge="undefined"],
  &[data-badge="null"],
  .is-undefined,
  .is-null {
    &:after {
      display: none;
    }
  }
}
